<!DOCTYPE html>
<html>
  <head>
    <title>PullRadar Popup</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="styles/popup.css" />
  </head>
  <body>
    <div id="content-wrap">
      <div id="header-container">
        <h1 id="header-title">
          <img src="./icons/icon48.png" alt="PullRadar icon" id="header-icon" />
          <strong>P</strong>ull<strong>R</strong>adar
        </h1>
        <div id="user-status-area" style="display: flex; align-items: center">
          <p
            id="user-status-message"
            style="margin: 0 8px 0 0; display: none; color: #586069"
          ></p>
          <a
            id="user-avatar-link"
            href="#"
            target="_blank"
            style="display: none; line-height: 0"
          >
            <img
              id="user-avatar"
              src=""
              alt="User Avatar"
              style="width: 32px; height: 32px; border-radius: 50%"
            />
          </a>
          <a
            href="#"
            id="settings-icon-button"
            title="Open Settings"
            style="
              margin-left: 8px;
              padding: 4px;
              border-radius: 6px;
              cursor: pointer;
              width: 20px;
              height: 20px;
              line-height: 0;
            "
          >
            <svg
              viewBox="0 0 24 24"
              width="20"
              height="20"
              fill="currentColor"
              aria-hidden="true"
              style="display: block"
            >
              <use href="assets/icons.svg#icon-settings"></use>
            </svg>
          </a>
        </div>
      </div>
      <div id="pr-summary">
        <p>Open the options to set your GitHub Token and preferences.</p>
        <p><button id="open-options-page">Open Options</button></p>
      </div>

      <div id="all-prs-sections-container" style="display: none">
        <!-- Assigned to You Section -->
        <details class="pr-section" id="assigned-prs-section" open>
          <summary>
            <span class="summary-title">Assigned to you</span
            ><span class="pr-count-badge" id="assigned-pr-count">0</span>
          </summary>
          <div
            id="assigned-pr-list-loader"
            class="spinner-container"
            style="display: none"
          >
            <div class="spinner"></div>
          </div>
          <ul id="assigned-pr-list" class="pr-list-items"></ul>
          <p
            id="no-assigned-prs-message"
            class="no-prs-message-category"
            style="display: none"
          >
            No PRs assigned to you.
          </p>
        </details>

        <!-- Created by You Section -->
        <details class="pr-section" id="created-prs-section">
          <summary>
            <span class="summary-title">Created by you</span
            ><span class="pr-count-badge" id="created-pr-count">0</span>
          </summary>
          <div
            id="created-pr-list-loader"
            class="spinner-container"
            style="display: none"
          >
            <div class="spinner"></div>
          </div>
          <ul id="created-pr-list" class="pr-list-items"></ul>
          <p
            id="no-created-prs-message"
            class="no-prs-message-category"
            style="display: none"
          >
            No PRs created by you.
          </p>
        </details>

        <!-- Review Requested Section -->
        <details class="pr-section" id="review-prs-section">
          <summary>
            Review requests
            <span class="pr-count-badge" id="review-pr-count">0</span>
          </summary>
          <div
            id="review-pr-list-loader"
            class="spinner-container"
            style="display: none"
          >
            <div class="spinner"></div>
          </div>
          <ul id="review-pr-list" class="pr-list-items"></ul>
          <p
            id="no-review-prs-message"
            class="no-prs-message-category"
            style="display: none"
          >
            No review requests for you.
          </p>
        </details>

        <!-- Mentioning You Section -->
        <details class="pr-section" id="mentioned-prs-section">
          <summary>
            Mentioning you
            <span class="pr-count-badge" id="mentioned-pr-count">0</span>
          </summary>
          <div
            id="mentioned-pr-list-loader"
            class="spinner-container"
            style="display: none"
          >
            <div class="spinner"></div>
          </div>
          <ul id="mentioned-pr-list" class="pr-list-items"></ul>
          <p
            id="no-mentioned-prs-message"
            class="no-prs-message-category"
            style="display: none"
          >
            No PRs mentioning you.
          </p>
        </details>
      </div>
    </div>
    <footer>
      <p>
        <!-- Contribute/Star the repo -->
        ‚≠êÔ∏è
        <a
          href="https://github.com/codebyrpp/pullradar"
          target="_blank"
          style="margin-right: 8px"
        >
          Star PullRadar to show your love!
        </a>
        üíõ
      </p>
    </footer>
    <script src="browser-polyfill.min.js"></script>
    <script src="auth.js"></script>
    <script src="popup.js"></script>

    <!-- Templates -->
    <template id="pr-item-template">
      <li>
        <a class="pr-author-avatar-link" target="_blank">
          <img class="pr-author-avatar" alt="" />
        </a>
        <a class="pr-link" target="_blank"></a>
      </li>
    </template>

    <template id="pr-item-no-avatar-template">
      <li>
        <a class="pr-link" target="_blank"></a>
      </li>
    </template>

    <div id="options-panel" class="options-panel-hidden">
      <div class="options-panel-header">
        <button
          id="back-options-panel"
          title="Back to Popup"
          class="panel-header-button"
        >
          <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
            <use href="assets/icons.svg#icon-back-arrow"></use>
          </svg>
        </button>
        <h2>PullRadar Options</h2>
        <span class="panel-header-spacer"></span>
      </div>
      <div class="options-panel-content">
        <div class="form-group">
          <label for="popup-github-pat">GitHub Personal Access Token:</label>
          <input
            type="password"
            id="popup-github-pat"
            name="popup-github-pat"
            size="35"
          />
          <p class="info">
            Required for accessing GitHub API. Ensure it has 'repo' and
            'notifications' scopes.
          </p>
        </div>
        <div class="form-group">
          <label for="popup-polling-interval"
            >Polling Interval (seconds):</label
          >
          <input
            type="number"
            id="popup-polling-interval"
            name="popup-polling-interval"
            min="10"
            value="60"
          />
          <p class="info">Minimum 10 seconds. Default is 60 seconds.</p>
        </div>
        <div class="form-group">
          <label for="popup-theme-select">Theme:</label>
          <select id="popup-theme-select" name="popup-theme-select">
            <option value="system">System Default</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
          <p class="info">Choose your preferred theme.</p>
        </div>
        <button id="popup-save-options">Save Options</button>
        <div id="popup-status" class="status-message"></div>
      </div>
    </div>
  </body>
</html>
